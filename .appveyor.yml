branches:
  only:
    - master

clone_depth: 50

install:
  - cmake --version

  - git clone --depth=1 --quiet -- https://github.com/WeAreROLI/JUCE.git ../JUCE

  - mkdir C:\SDKs
  - ps: Invoke-WebRequest -Uri http://www.steinberg.net/sdk_downloads/vstsdk367_03_03_2017_build_352.zip -OutFile C:\SDKs\vstsdk3.zip
  - 7z x C:\SDKs\vstsdk3.zip -oC:\SDKs

build_script:
  - cmake -P cmake/test/run_all_tests.cmake

  - mkdir "examples\audio plugin host\build"
  - cd "examples\audio plugin host\build"
  - cmake ..
  - cmake --build . --config Debug
  - cmake --build . --config Release

  - cd %APPVEYOR_BUILD_FOLDER%

  - mkdir examples\NetworkGraphicsDemo\build
  - cd examples\NetworkGraphicsDemo\build
  - cmake ..
  - cmake --build . --config Debug
  - cmake --build . --config Release

  - cd %APPVEYOR_BUILD_FOLDER%

  - mkdir extras\Projucer\build
  - cd extras\Projucer\build
  - cmake ..
  - cmake --build . --config Debug
  - cmake --build . --config Release

  - cd %APPVEYOR_BUILD_FOLDER%

  - mkdir "examples\audio plugin demo\build"
  - cd "examples\audio plugin demo\build"
  - cmake ..
  - cmake --build . --config Debug
  - cmake --build . --config Release
